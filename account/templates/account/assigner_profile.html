{% extends 'core/base.html' %}
{% load user_tags %}


{% block body %}
  <h1>Abstracts</h1><br>
  <p>Below is a table of currently submitted abstracts and their assigned reviewers.</p>
  {% if object_list.count %}
    <div class="container-fluid">
      <table id="abstract-table" class="table table-hover display" style="width:100%">
        <thead>
          <th>Title</th>
          <th>State</th>
          <th>Keywords</th>
          <th>Pending</th>
          <th>Accepted</th>
          <th>Declined</th>
          <th>Assign</th>
        </thead>
        <tbody>
          {% for abstract in object_list.all %}
            <tr>
              <td><a href="{% url 'abstract:abstract_summary' abstract.id %}">{{ abstract.title }}</a></td>
              <td>{{ abstract.state|default:"-" }}</td>
              <td>{{ abstract.keywords.all|join:', '|default:"-" }}</td>
              <td>
                {% users_full_name abstract.pending_reviewers as pending_reviewers %}
                {{ pending_reviewers|join:', '|default:"-" }}
              </td>
              <td>
                {% users_full_name abstract.accepted_reviewers as accepted_reviewers %}
                {{ accepted_reviewers|join:', '|default:"-" }}
              </td>
              <td>
                {% users_full_name abstract.declined_reviewers as declined_reviewers %}
                {{ declined_reviewers|join:', '|default:"-" }}
              </td>
              <td>
                <a href="{% url 'account:assign_reviewers' abstract.id %}"
                   class="btn btn-outline-dark">Edit
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
      <p class="text-muted">No abstracts have been submitted.</p>
    {% endif %}

{% endblock %}


{% block extra_scripts %}
<script type="text/javascript">
  $("document").ready(function() {
    let table = $("#abstract-table").DataTable({
      responsive: true,
      paging: false,
    });
  });
</script>
{% endblock %}